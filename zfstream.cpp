/** @file *//********************************************************************************************************

                                                    zfstream.cpp

	--------------------------------------------------------------------------------------------------------------

	$Header: //depot/Libraries/zstream/zfstream.cpp#2 $

	$NoKeywords: $

*********************************************************************************************************************/

#include "zfstream.h"

#include "zlib/zlib.h"

#include <istream>
#include <ostream>


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

///
/// @param	_Filename	Name of the file to be opened for input, or 0

izfstream::izfstream( char const * _Filename/* = 0*/ )
	: std::basic_istream< char_type, traits_type >( &_Filebuffer )
{
	if ( _Filename && _Filebuffer.open( _Filename, std::ios_base::in ) == 0 )
	{
		_Myios::setstate( std::ios_base::failbit );
	}
}


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

izfstream::~izfstream()
{
}


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

///
/// @param	_Filename	Name of the file to be opened for input

void izfstream::open( char const * _Filename )
{
	if ( _Filebuffer.open( _Filename, std::ios_base::in ) == 0 )
	{
		_Myios::setstate( std::ios_base::failbit );
	}
}


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

void izfstream::close()
{
	if ( _Filebuffer.close() == 0 )
	{
		_Myios::setstate( ios_base::failbit );
	}
}


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

///
/// @param	_Filename	Name of the file to be opened for output

ozfstream::ozfstream( const char * _Filename/* = 0*/ )
	: std::basic_ostream< char_type, traits_type >( &_Filebuffer )
{
	if ( _Filename && _Filebuffer.open( _Filename, std::ios_base::out ) == 0 )
	{
		_Myios::setstate( std::ios_base::failbit );
	}
}


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

ozfstream::~ozfstream()
{
}


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

///
/// @param	_Filename	Name of the file to be opened for output

void ozfstream::open( char const * _Filename )
{
	if ( _Filebuffer.open( _Filename, std::ios_base::out ) == 0 )
	{
		_Myios::setstate( std::ios_base::failbit );
	}
}


/********************************************************************************************************************/
/*																													*/
/*																													*/
/********************************************************************************************************************/

void ozfstream::close()
{
	if ( _Filebuffer.close() == 0 )
	{
		_Myios::setstate( std::ios_base::failbit );
	}
}
